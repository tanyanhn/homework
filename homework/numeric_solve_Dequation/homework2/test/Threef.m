
% u = [1 2 3 4 5 6];

syms u0 u1 u2 u3 u4 u5 mu 
% y(1:3) = [u(4), u(5), u(6)];  
% y(4) = 2* u(5) + u(1) - m * ( u(1) + m - 1) / (u(2)^2 + u(3)^2 + (u(1) + m -1)^2)^1.5- (1-m)* (u(1) + m)   / (u(2)^2 + u(3)^2 + (u(1) + m)^2)^1.5 ;
% y(5) = -2* u(4) + u(2) - m * ( u(2)) / (u(2)^2 + u(3)^2 + (u(1) + m -1)^2)^1.5 - (1-m)* (u(2))   / (u(2)^2 + u(3)^2 + (u(1) + m)^2)^1.5 ;
% y(6) = - m * ( u(3)) / (u(2)^2 + u(3)^2 + (u(1) + m -1)^2)^1.5 - (1-m)* (u(3)) / (u(2)^2 + u(3)^2 + (u(1) + m)^2)^1.5 ;

mat = jacobian([u3, u4, u5, ...
    + 2 * u4 + u0 - mu * ( u0 + mu - 1) / (u1^2 + u2^2 + (u0 + mu -1)^2)^1.5-(1-mu)* (u0 + mu)/ (u1^2 + u2^2 + (u0 + mu)^2)^1.5 , ...
    - 2 * u3 + u1 - mu * ( u1) / (u1^2 + u2^2 + (u0 + mu -1)^2)^1.5 - (1-mu)* (u1)/ (u1^2 + u2^2 + (u0 + mu)^2)^1.5 , ...
    - mu * (u2) / (u1^2 + u2^2 + (u0 + mu -1)^2)^1.5 - (1-mu)* (u2) / (u1^2 + u2^2 + (u0 + mu)^2)^1.5 ], ...
[u0,u1,u2,u3,u4,u5])

u0 = 1; u1 = 2; u2 = 3; u3 = 4; u4 = 5; u5 = 6;
mu = 1/81.45;

eval(mat)

% u0 = 10.1; u1 = -0.4; u2 = -8.3; u3 = 11.1; u4 = 9.99; u5 = 7.3;
% mu = 1/179.9;
% 
% eval(mat)
% 
% b = [1.1, 4.8, -7.1, 0.1, -2, 7.1; ...
%     1.3, 0.4, 0.8, -3.0, 9.1, 11.1; ...
%     4.2, 5.1, 9.0, 4.3, -2.4, -10.3; ...
%     0.1, 0.2, 0.3, 0.4, 0.5, 0.6; ...
%     1,     3,   -1,  0,   9,  4 ; ...
%     -4,  5.3, 6.1, 7.9, -1.2, 0];
% c = diag(ones(1,6))/b
% d = [ -0.0251695409, -0.1344954673, 0.0276860253, 1.4621069113, 0.2155388538, -0.1811249379; ...
%     0.1176651508, 0.1353815514, 0.0873511766, -1.564240077, -0.0932792002, 0.1056498542; ...
%     -0.0140514682, 0.1534096109, 0.0605816925, -0.3719598686, -0.1717694602, 0.0573633851;...
%     -0.0288066336, -0.2014097732, -0.0565357079, 2.3661079207, 0.0945635896, -0.0499488984; ...
%     -0.0541219115, -0.0454708222, -0.0218524906, 0.1141363542, 0.1447906308, -0.0135555914; ...
%     0.036304956, 0.0727494559, -0.0081213619, 0.4578565657, -0.1026465976, 0.0108847708];
% d * b